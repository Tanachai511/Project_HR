{% extends "admin/change_list.html" %}

{% block result_list %}
  <style>
    /* ===== ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÅ‡∏•‡∏∞‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡πÉ‡∏´‡∏°‡πà ===== */
    .news-card {
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid #e5e7eb;
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .news-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.12);
    }

    .thumb {
      width: 100%;
      height: 200px;
      border-bottom: 1px solid #e5e7eb;
      object-fit: cover;
      background: #f3f6f8;
    }

    .card-body {
      padding: 1.25rem 1.25rem 1.4rem;
      display: flex;
      flex-direction: column;
    }

    .card-title {
      font-size: 1.15rem;          /* ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏•‡πá‡∏Å‡πÑ‡∏õ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
      font-weight: 700;
      color: #1f2937;
      margin-bottom: .35rem;
      line-height: 1.4;
    }

    .card-text {
      font-size: 0.975rem;         /* ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô */
      color: #374151;
      line-height: 1.6;
    }

    .text-muted {
      font-size: 0.9rem;
      color: #6b7280 !important;
    }

    .line-clamp-3 {
      display: -webkit-box;
      -webkit-box-orient: vertical;
      overflow: hidden;
      -webkit-line-clamp: 3;
    }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏ß‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô */
    .btn {
      font-size: 0.95rem;
      font-weight: 600;
      border-radius: 8px;
      padding: .4rem .75rem;
    }
    .btn-primary {
      background-color: #2E8B57;
      border: none;
    }
    .btn-primary:hover {
      background-color: #26724a;
    }
    .btn-outline-danger {
      border-color: #dc2626;
      color: #dc2626;
    }
    .btn-outline-danger:hover {
      background-color: #dc2626;
      color: #fff;
    }

    /* Layout */
    .row.g-3 {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
    }
    .col-12.col-md-6.col-lg-4 {
      flex: 1 1 calc(33.333% - 1rem);
      min-width: 320px;
    }

    @media (max-width: 992px) {
      .col-12.col-md-6.col-lg-4 { flex: 1 1 calc(50% - 1rem); }
      .thumb { height: 180px; }
    }
    @media (max-width: 576px) {
      .col-12.col-md-6.col-lg-4 { flex: 1 1 100%; }
      .thumb { height: 160px; }
      .card-title { font-size: 1.1rem; }
      .card-text { font-size: 0.93rem; }
    }

  </style>

  <div class="row g-3">
    {% for obj in cl.result_list %}
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card news-card h-100 shadow-sm">
          {% if obj.news_img %}
            <a href="{{ obj.news_img.url }}" target="_blank" rel="noopener">
              <img class="thumb" src="{{ obj.news_img.url }}" alt="{{ obj.news_head }}">
            </a>
          {% else %}
            <div class="thumb d-flex align-items-center justify-content-center text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>
          {% endif %}

          <div class="card-body">
            <h5 class="card-title">{{ obj.news_head }}</h5>
            <div class="text-muted small mb-2">
              üïì {{ obj.news_date|date:"Y-m-d H:i" }}
            </div>
            <p class="card-text line-clamp-3 mb-3">{{ obj.news_subhead|default:"‚Äî" }}</p>

            <div class="mt-auto d-flex gap-2">
              <a href="{% url 'admin:myapp_new_change' obj.pk %}" class="btn btn-sm btn-primary">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
              <a href="{% url 'admin:myapp_new_delete' obj.pk %}" class="btn btn-sm btn-outline-danger">üóë ‡∏•‡∏ö</a>
            </div>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12">
        <div class="alert alert-info mb-0">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
